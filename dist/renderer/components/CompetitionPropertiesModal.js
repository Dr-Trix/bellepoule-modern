"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
/**
 * BellePoule Modern - Competition Properties Modal
 * Licensed under GPL-3.0
 */
const react_1 = require("react");
const useTranslation_1 = require("../hooks/useTranslation");
const CompetitionPropertiesModal = ({ competition, onSave, onClose, }) => {
    const { t } = (0, useTranslation_1.useTranslation)();
    const [title, setTitle] = (0, react_1.useState)(competition.title);
    const [date, setDate] = (0, react_1.useState)(competition.date.toISOString().split('T')[0]);
    const [location, setLocation] = (0, react_1.useState)(competition.location || '');
    const [organizer, setOrganizer] = (0, react_1.useState)(competition.organizer || '');
    const [weapon, setWeapon] = (0, react_1.useState)(competition.weapon);
    const [gender, setGender] = (0, react_1.useState)(competition.gender);
    const [category, setCategory] = (0, react_1.useState)(competition.category);
    // Paramètres de compétition
    const [poolRounds, setPoolRounds] = (0, react_1.useState)(competition.settings?.poolRounds ?? 1);
    const [hasDirectElimination, setHasDirectElimination] = (0, react_1.useState)(competition.settings?.hasDirectElimination ?? true);
    const [poolMaxScore, setPoolMaxScore] = (0, react_1.useState)(competition.settings?.defaultPoolMaxScore ?? 21);
    const [tableMaxScore, setTableMaxScore] = (0, react_1.useState)(competition.settings?.defaultTableMaxScore ?? 0);
    const [thirdPlaceMatch, setThirdPlaceMatch] = (0, react_1.useState)(competition.settings?.thirdPlaceMatch ?? false);
    const handleSubmit = (e) => {
        e.preventDefault();
        const settings = {
            ...(competition.settings || {}),
            poolRounds,
            hasDirectElimination,
            thirdPlaceMatch,
            defaultPoolMaxScore: poolMaxScore,
            defaultTableMaxScore: tableMaxScore,
            manualRanking: competition.settings?.manualRanking ?? false,
            defaultRanking: competition.settings?.defaultRanking ?? 9999,
            randomScore: competition.settings?.randomScore ?? false,
            minTeamSize: competition.settings?.minTeamSize ?? 3,
        };
        onSave({
            title,
            date: new Date(date),
            location,
            organizer,
            weapon,
            gender,
            category,
            settings,
        });
        onClose();
    };
    return ((0, jsx_runtime_1.jsx)("div", { className: "modal-overlay", onClick: onClose, children: (0, jsx_runtime_1.jsxs)("div", { className: "modal", onClick: e => e.stopPropagation(), style: { maxWidth: '550px' }, children: [(0, jsx_runtime_1.jsxs)("div", { className: "modal-header", children: [(0, jsx_runtime_1.jsx)("h2", { children: "Propri\u00E9t\u00E9s de la comp\u00E9tition" }), (0, jsx_runtime_1.jsx)("button", { className: "btn-close", onClick: onClose, children: "\u00D7" })] }), (0, jsx_runtime_1.jsxs)("form", { onSubmit: handleSubmit, className: "modal-body", children: [(0, jsx_runtime_1.jsxs)("div", { style: { marginBottom: '1.5rem' }, children: [(0, jsx_runtime_1.jsx)("h3", { style: { fontSize: '0.875rem', fontWeight: '600', color: '#6b7280', marginBottom: '0.75rem', textTransform: 'uppercase' }, children: "Informations g\u00E9n\u00E9rales" }), (0, jsx_runtime_1.jsxs)("div", { className: "form-group", children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "title", children: "Titre" }), (0, jsx_runtime_1.jsx)("input", { type: "text", id: "title", className: "form-input", value: title, onChange: e => setTitle(e.target.value), required: true })] }), (0, jsx_runtime_1.jsxs)("div", { style: { display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }, children: [(0, jsx_runtime_1.jsxs)("div", { className: "form-group", children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "date", children: "Date" }), (0, jsx_runtime_1.jsx)("input", { type: "date", id: "date", className: "form-input", value: date, onChange: e => setDate(e.target.value), required: true })] }), (0, jsx_runtime_1.jsxs)("div", { className: "form-group", children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "location", children: "Lieu" }), (0, jsx_runtime_1.jsx)("input", { type: "text", id: "location", className: "form-input", value: location, onChange: e => setLocation(e.target.value) })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "form-group", children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "organizer", children: "Organisateur" }), (0, jsx_runtime_1.jsx)("input", { type: "text", id: "organizer", className: "form-input", value: organizer, onChange: e => setOrganizer(e.target.value) })] })] }), (0, jsx_runtime_1.jsxs)("div", { style: { marginBottom: '1.5rem' }, children: [(0, jsx_runtime_1.jsx)("h3", { style: { fontSize: '0.875rem', fontWeight: '600', color: '#6b7280', marginBottom: '0.75rem', textTransform: 'uppercase' }, children: "Configuration" }), (0, jsx_runtime_1.jsxs)("div", { style: { display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: '1rem' }, children: [(0, jsx_runtime_1.jsxs)("div", { className: "form-group", children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "weapon", children: "Arme" }), (0, jsx_runtime_1.jsxs)("select", { id: "weapon", className: "form-input form-select", value: weapon, onChange: e => setWeapon(e.target.value), children: [(0, jsx_runtime_1.jsx)("option", { value: "E", children: "\u00C9p\u00E9e" }), (0, jsx_runtime_1.jsx)("option", { value: "F", children: "Fleuret" }), (0, jsx_runtime_1.jsx)("option", { value: "S", children: "Sabre" }), (0, jsx_runtime_1.jsx)("option", { value: "L", children: "Sabre Laser" })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "form-group", children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "gender", children: "Genre" }), (0, jsx_runtime_1.jsxs)("select", { id: "gender", className: "form-input form-select", value: gender, onChange: e => setGender(e.target.value), children: [(0, jsx_runtime_1.jsx)("option", { value: "M", children: "Masculin" }), (0, jsx_runtime_1.jsx)("option", { value: "F", children: "F\u00E9minin" }), (0, jsx_runtime_1.jsx)("option", { value: "X", children: "Mixte" })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "form-group", children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "category", children: "Cat\u00E9gorie" }), (0, jsx_runtime_1.jsxs)("select", { id: "category", className: "form-input form-select", value: category, onChange: e => setCategory(e.target.value), children: [(0, jsx_runtime_1.jsx)("option", { value: "U11", children: "U11 (Poussin)" }), (0, jsx_runtime_1.jsx)("option", { value: "U13", children: "U13 (Benjamin)" }), (0, jsx_runtime_1.jsx)("option", { value: "U15", children: "U15 (Minime)" }), (0, jsx_runtime_1.jsx)("option", { value: "U17", children: "U17 (Cadet)" }), (0, jsx_runtime_1.jsx)("option", { value: "U20", children: "U20 (Junior)" }), (0, jsx_runtime_1.jsx)("option", { value: "SEN", children: "Senior" }), (0, jsx_runtime_1.jsx)("option", { value: "V1", children: "V\u00E9t\u00E9ran 1" }), (0, jsx_runtime_1.jsx)("option", { value: "V2", children: "V\u00E9t\u00E9ran 2" }), (0, jsx_runtime_1.jsx)("option", { value: "V3", children: "V\u00E9t\u00E9ran 3" }), (0, jsx_runtime_1.jsx)("option", { value: "V4", children: "V\u00E9t\u00E9ran 4" })] })] })] })] }), (0, jsx_runtime_1.jsxs)("div", { style: { marginBottom: '1rem' }, children: [(0, jsx_runtime_1.jsx)("h3", { style: { fontSize: '0.875rem', fontWeight: '600', color: '#6b7280', marginBottom: '0.75rem', textTransform: 'uppercase' }, children: "Formule de comp\u00E9tition" }), (0, jsx_runtime_1.jsxs)("div", { style: { display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }, children: [(0, jsx_runtime_1.jsxs)("div", { className: "form-group", children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "poolRounds", children: "Tours de poules" }), (0, jsx_runtime_1.jsxs)("select", { id: "poolRounds", className: "form-input form-select", value: poolRounds, onChange: e => setPoolRounds(parseInt(e.target.value)), children: [(0, jsx_runtime_1.jsx)("option", { value: "1", children: "1 tour" }), (0, jsx_runtime_1.jsx)("option", { value: "2", children: "2 tours" }), (0, jsx_runtime_1.jsx)("option", { value: "3", children: "3 tours" })] }), (0, jsx_runtime_1.jsx)("small", { style: { color: '#6b7280', fontSize: '0.75rem' }, children: "Nombre de phases de poules avant le tableau" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "form-group", children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "hasDirectElimination", children: "\u00C9limination directe" }), (0, jsx_runtime_1.jsxs)("select", { id: "hasDirectElimination", className: "form-input form-select", value: hasDirectElimination ? 'true' : 'false', onChange: e => setHasDirectElimination(e.target.value === 'true'), children: [(0, jsx_runtime_1.jsx)("option", { value: "true", children: "Activ\u00E9e" }), (0, jsx_runtime_1.jsx)("option", { value: "false", children: "D\u00E9sactiv\u00E9e" })] }), (0, jsx_runtime_1.jsx)("small", { style: { color: '#6b7280', fontSize: '0.75rem' }, children: hasDirectElimination ? 'Tableau après les poules' : 'Classement final sur les poules' })] })] }), (0, jsx_runtime_1.jsxs)("div", { style: { display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem', marginTop: '1rem' }, children: [(0, jsx_runtime_1.jsxs)("div", { className: "form-group", children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "poolMaxScore", children: "Score max poules" }), (0, jsx_runtime_1.jsx)("input", { type: "number", id: "poolMaxScore", className: "form-input", value: poolMaxScore, onChange: e => setPoolMaxScore(parseInt(e.target.value) || 0), min: "1", placeholder: "21" }), (0, jsx_runtime_1.jsx)("small", { style: { color: '#6b7280', fontSize: '0.75rem' }, children: "Touches pour gagner un match de poule" })] }), hasDirectElimination && ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsxs)("div", { className: "form-group", children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "tableMaxScore", children: "Score max tableau" }), (0, jsx_runtime_1.jsx)("input", { type: "number", id: "tableMaxScore", className: "form-input", value: tableMaxScore, onChange: e => setTableMaxScore(parseInt(e.target.value) || 0), min: "0", placeholder: "0" }), (0, jsx_runtime_1.jsx)("small", { style: { color: '#6b7280', fontSize: '0.75rem' }, children: tableMaxScore === 0 ? '0 = illimité (pas de limite)' : `${tableMaxScore} touches pour gagner` })] }), (0, jsx_runtime_1.jsxs)("div", { className: "form-group", children: [(0, jsx_runtime_1.jsxs)("label", { children: [(0, jsx_runtime_1.jsx)("input", { type: "checkbox", checked: thirdPlaceMatch, onChange: e => setThirdPlaceMatch(e.target.checked), style: { marginRight: '0.5rem' } }), t('competition.third_place_match_label')] }), (0, jsx_runtime_1.jsx)("small", { style: { color: '#6b7280', fontSize: '0.75rem', marginLeft: '1.5rem' }, children: t('competition.third_place_match_description') })] })] }))] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "modal-footer", children: [(0, jsx_runtime_1.jsx)("button", { type: "button", className: "btn btn-secondary", onClick: onClose, children: "Annuler" }), (0, jsx_runtime_1.jsx)("button", { type: "submit", className: "btn btn-primary", children: "Enregistrer" })] })] })] }) }));
};
exports.default = CompetitionPropertiesModal;
//# sourceMappingURL=CompetitionPropertiesModal.js.map